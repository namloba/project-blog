{% extends "base.html" %}
{% block content %}
<h2>ğŸ“ BÃ i Viáº¿t Blog</h2>
{% if posts %}
    {% for post in posts %}
    <div class="post-card">
        <div class="post-header">
            <h3>{{ post.title }}</h3>
            <div class="post-author">
                <span class="author-name">ğŸ‘¤ {{ post.username }}</span>
                {% if post.role == 'admin' %}
                <span class="admin-badge">â­ Admin</span>
                {% endif %}
            </div>
        </div>
        
        {% if post.image_path %}
        <div class="post-image">
            <img src="/static/{{ post.image_path }}" alt="{{ post.title }}">
        </div>
        {% endif %}
        
        <p class="post-content">{{ post.content }}</p>
        
        <div class="post-footer">
            <div class="post-meta">
                <span>ğŸ“… {{ post.created_at }}</span>
                <span>ğŸ’¬ {{ post.comment_count }} bÃ¬nh luáº­n</span>
            </div>
            <div class="post-actions">
                <a href="/post/{{ post.id }}" class="btn-view">ğŸ‘ï¸ Xem chi tiáº¿t</a>
                {% if session.get("user_id") %}
                    {% if session.get("user_id") == post.author_id or session.get("role") == "admin" %}
                    <a href="/edit/{{ post.id }}">âœï¸ Sá»­a</a>
                    <a href="/delete/{{ post.id }}" onclick="return confirm('Báº¡n cÃ³ cháº¯c muá»‘n xÃ³a bÃ i viáº¿t nÃ y?')">ğŸ—‘ï¸ XÃ³a</a>
                    {% endif %}
                {% endif %}
            </div>
        </div>
    </div>
    {% endfor %}
{% else %}
    <div class="empty-state">
        <p>ğŸ“­ ChÆ°a cÃ³ bÃ i viáº¿t nÃ o. HÃ£y táº¡o bÃ i viáº¿t Ä‘áº§u tiÃªn cá»§a báº¡n!</p>
    </div>
{% endif %}
{% endblock %}